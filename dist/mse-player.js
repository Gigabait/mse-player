!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports["mse-player"]=e():t["mse-player"]=e()}(this,function(){return function(t){function e(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,e),o.l=!0,o.exports}var n={};return e.m=t,e.c=n,e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:r})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=11)}([function(t,e){var n=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(t,e){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},function(t,e){var n=t.exports={version:"2.5.1"};"number"==typeof __e&&(__e=n)},function(t,e,n){var r=n(29),o=n(34);t.exports=n(4)?function(t,e,n){return r.f(t,e,o(1,n))}:function(t,e,n){return t[e]=n,t}},function(t,e,n){t.exports=!n(6)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r={MEDIA_SOURCE_SOURCE_OPEN:"sourceopen",MEDIA_SOURCE_SOURCE_ENDED:"sourceended",MEDIA_SOURCE_SOURCE_CLOSE:"sourceclose",MEDIA_ELEMENT_PROGRESS:"progress",MEDIA_ELEMENT_EMPTIED:"emptied",WS_OPEN:"open",WS_MESSAGE:"message",BUFFER_UPDATE_END:"updateend"};e.default=r,t.exports=e.default},function(t,e){t.exports=function(t){try{return!!t()}catch(t){return!0}}},function(t,e){var n=0,r=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++n+r).toString(36))}},function(t,e,n){var r=n(37);t.exports=function(t,e,n){if(r(t),void 0===e)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,o){return t.call(e,n,r,o)}}return function(){return t.apply(e,arguments)}}},function(t,e){var n={}.toString;t.exports=function(t){return n.call(t).slice(8,-1)}},function(t,e,n){var r=n(47)("wks"),o=n(7),i=n(0).Symbol,s="function"==typeof i;(t.exports=function(t){return r[t]||(r[t]=s&&i[t]||(s?i:o)("Symbol."+t))}).store=r},function(t,e,n){t.exports=n(12)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(13),o=function(t){return t&&t.__esModule?t:{default:t}}(r);e.default=o.default,t.exports=e.default},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function o(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var s=n(14),a=o(s),u=n(5),c=r(u),h=n(15),f=r(h),p=n(16),l=o(p);n(26);var d=function(){function t(e,n,r){if(i(this,t),!(e instanceof HTMLMediaElement))throw new Error(f.default.NOT_HTML_MEDIA_ELEMENT);this.media=e,this.url=n,this.onProgress=r&&r.onProgress,this.onMediaInfo=r&&r.onMediaInfo,this.doArrayBuffer=l.doArrayBuffer.bind(this),this.maybeAppend=this.maybeAppend.bind(this),this.init(),this.onAttachMedia({media:e})}return t.replaceHttpByWS=function(t){return l.replaceHttpByWS(t)},t.isSupported=function(){return l.isSupportedMSE()},t.prototype.seek=function(t){var e=this;try{if(!t)throw new Error('utc should be "live" or UTC value');this.stop().then(function(){return e.play(t)})}catch(t){console.warn("onMediaDetaching:"+t.message+" while calling endOfStream")}},t.prototype.play=function(t,e,n){if(!this.playing){if(this._pause)return void this._resume();if(!this.mediaSource)return this.onAttachMedia({media:this.media}),this.onsoa=this.play.bind(this,t,e,n),this.mediaSource.addEventListener(c.default.MEDIA_SOURCE_SOURCE_OPEN,this.onsoa),void console.warn("mediaSource did not create");if(this.playTime=t,this.videoTrack=e,this.audioTack=n,this.mediaSource&&"open"!==this.mediaSource.readyState)return console.warn('readyState is not "open"'),void(this.shouldPlay=!0);return l.startWebSocket(this.url,t,e,n).bind(this)(),this.playPromise=this.media.play(),this.startProgressTimer(),this.playing=!0,this.playPromise}},t.prototype.stop=function(){return this.onMediaDetaching()},t.prototype.pause=function(){function t(){if(this.media.pause(),this.websocket.send("pause"),this._pause=!0,this.playing=!1,this.onPause)try{this.onPause()}catch(t){console.error("Error "+t.name+":"+t.message+"\n"+t.stack)}}this._pause||this.media&&this.websocket&&this.mediaSource&&(this.mediaSource&&"open"!==this.mediaSource.readyState||this.playPromise&&this.playPromise.then(t.bind(this)))},t.prototype.setTracks=function(t){var e=this;if(!this.mediaInfo)return void console.warn("Media info did not loaded. Should try after onMediaInfo triggered or inside.");Array.isArray(t)||console.error('tracks should be an Array instance: ["v1", "a1"]');var n=t.filter(function(t){var n=e.mediaInfo.streams.find(function(e){return t===e.track_id});return!!n&&"video"===n.content}).join(""),r=t.filter(function(t){var n=e.mediaInfo.streams.find(function(e){return t===e.track_id});return!!n&&"audio"===n.content}).join("");return this._setTracks(n,r)},t.prototype.init=function(){this._buffers={},this._queues={},this.playing=!1,this.shouldPlay=!1,this.playTime=void 0,this.audioTack="",this.videoTrack="",this.endProgressTimer()},t.prototype._resume=function(){this.websocket.send("resume"),this.playPromise=this.media.play(),this._pause=!1,this.playing=!0},t.prototype.onMediaDetaching=function(){return this.playPromise?this.playPromise.then(this.handlerMediaDetaching.bind(this)):this.playPromise?void 0:this.handlerMediaDetaching()},t.prototype.handlerMediaDetaching=function(){var t=this;console.info("media source detaching");var e=void 0;return this.removeMediaSource(),this.media&&(this.media.removeEventListener(c.default.MEDIA_ELEMENT_PROGRESS,this.oncvp),e=new Promise(function(e){t._onmee=t.onMediaElementEmptied(e).bind(t)}),this.media.addEventListener(c.default.MEDIA_ELEMENT_EMPTIED,this._onmee)),this.oncvp=null,this.mediaSource=null,this.init(),this.destroyWebsocket(),e},t.prototype.removeMediaSource=function(){var t=this.mediaSource;if(t){if("open"===t.readyState)try{t.endOfStream()}catch(t){console.warn("onMediaDetaching:"+t.message+" while calling endOfStream")}t.removeEventListener(c.default.MEDIA_SOURCE_SOURCE_OPEN,this.onmso),t.removeEventListener(c.default.MEDIA_SOURCE_SOURCE_ENDED,this.onmse),t.removeEventListener(c.default.MEDIA_SOURCE_SOURCE_CLOSE,this.onmsc),this.onmso=null,this.onmse=null,this.onmsc=null}URL.revokeObjectURL(this.media.src),this.media.removeAttribute("src"),this.media.load()},t.prototype.destroyWebsocket=function(){this.websocket&&(this.websocket.removeEventListener(c.default.WS_MESSAGE,this.onwsdm),this.websocket.onclose=function(){},this.websocket.close(),this.onwsdm=null)},t.prototype.onMediaElementEmptied=function(t){return this._onmee&&this.media&&(this.media.removeEventListener(c.default.MEDIA_ELEMENT_EMPTIED,this._onmee),this._onmee=void 0),t()},t.prototype.onAttachMedia=function(t){var e=this;this.media=t.media;var n=this.media;if(n){var r=this.mediaSource=new MediaSource;return this.onmse=this.onMediaSourceEnded.bind(this),this.onmsc=this.onMediaSourceClose.bind(this),r.addEventListener(c.default.MEDIA_SOURCE_SOURCE_ENDED,this.onmse),r.addEventListener(c.default.MEDIA_SOURCE_SOURCE_CLOSE,this.onmsc),n.src=URL.createObjectURL(r),this.oncvp=l.checkVideoProgress(n).bind(this),this.media.addEventListener(c.default.MEDIA_ELEMENT_PROGRESS,this.oncvp),new Promise(function(t){e.onmso=e.onMediaSourceOpen.bind(e,t),r.addEventListener(c.default.MEDIA_SOURCE_SOURCE_OPEN,e.onmso)})}},t.prototype.onMediaSourceOpen=function(t){t();var e=this.mediaSource;e&&e.removeEventListener(c.default.MEDIA_SOURCE_SOURCE_OPEN,this.onSourceOpen),this.shouldPlay&&(console.info("readyState now is "+this.mediaSource.readyState+", and will be played",this.playTime,this.audioTack,this.videoTrack),this.shouldPlay=!1,this.play(this.playTime,this.audioTack,this.videoTrack))},t.prototype.onWebsocketOpen=function(){this.websocket.send("resume"),this.websocket.removeEventListener(c.default.WS_OPEN,this.onwso)},t.prototype.dispatchMessage=function(t){try{if(this._pause)return;if(!this.playing)return;var e=t.data;e instanceof ArrayBuffer?this.doArrayBuffer(e,this.maybeAppend):this.procInitSegment(e)}catch(t){console.error("Error "+t.name+":"+t.message+"\n"+t.stack)}},t.prototype.procInitSegment=function(t){var e=this,n=JSON.parse(t);if(n.type===a.MSE_INIT_SEGMENT){if(this.onMediaInfo){this.mediaInfo=n.metadata;try{this.onMediaInfo(n.metadata)}catch(t){console.error("Error "+t.name+":"+t.message+"\n"+t.stack)}}if(this.mediaSource&&!this.mediaSource.sourceBuffers.length)return this.createSourceBuffers(n.tracks),void n.tracks.forEach(function(t){e.maybeAppend(t.id,l.base64ToArrayBuffer(t.payload))});this.mediaSource&&this.mediaSource.sourceBuffers.length&&this.stop().then(function(){setTimeout(function(){return e.play()},5e3)})}else n.type===a.MSE_MEDIA_SEGMENT&&this.maybeAppend(n.id,l.base64ToArrayBuffer(n.payload))},t.prototype.getVideoTracks=function(){if(this.mediaInfo)return this.mediaInfo.streams.filter(function(t){return"video"===t.content})},t.prototype.getAudioTracks=function(){if(this.mediaInfo)return this.mediaInfo.streams.filter(function(t){return"audio"===t.content})},t.prototype.maybeAppend=function(t,e){var n=this._buffers[t],r=this._queues[t];n.updating||r.length>0?r.push(e):n.appendBuffer(e)},t.prototype.startProgressTimer=function(){this.onProgress&&(this.timer=setInterval(this.onTimer.bind(this),100))},t.prototype.endProgressTimer=function(){clearInterval(this.timer),this.timer=void 0},t.prototype.onTimer=function(){if(this.utc&&this.utc!=this.utcPrev){try{this.onProgress(this.utc,this.media.currentTime,this.pts1)}catch(t){console.error("Error "+t.name+":"+t.message+"\n"+t.stack)}this.utcPrev=this.utc}},t.prototype.onMediaSourceEnded=function(){console.log("media source ended")},t.prototype.onMediaSourceClose=function(){console.log("media source closed")},t.prototype.createSourceBuffers=function(t){var e=this;t.forEach(function(t){function n(){try{i.length>0&&!o.updating&&o.appendBuffer(i.shift())}catch(t){console.error("Error "+t.name+":"+t.message+"\n"+t.stack)}}var r="video"===t.content?'video/mp4; codecs="avc1.4d401f"':'audio/mp4; codecs="mp4a.40.2"';e._buffers[t.id]=e.mediaSource.addSourceBuffer(r);var o=e._buffers[t.id];e._queues[t.id]=[];var i=e._queues[t.id];o.addEventListener(c.default.BUFFER_UPDATE_END,n)})},t.prototype._setTracks=function(t,e){var n=this;this.onMediaDetaching().then(function(){n.onAttachMedia({media:n.media}),n.onsoa=n.play.bind(n,n.utc,t,e),n.mediaSource.addEventListener(c.default.MEDIA_SOURCE_SOURCE_OPEN,n.onsoa)})},t}();e.default=d,t.exports=e.default},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.MSE_INIT_SEGMENT="mse_init_segment",e.MSE_MEDIA_SEGMENT="mse_media_segment"},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r={NOT_HTML_MEDIA_ELEMENT:"media should be an HTMLMediaElement instance"};e.default=r,t.exports=e.default},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function o(){if("undefined"!=typeof window)return window.MediaSource||window.WebKitMediaSource}function i(){return-1!==navigator.userAgent.indexOf("Android")}function s(){if(i())return!1;var t=o(),e=window.SourceBuffer||window.WebKitSourceBuffer,n=t&&"function"==typeof t.isTypeSupported&&t.isTypeSupported('video/mp4; codecs="avc1.4d401f,mp4a.40.2"'),r=!e||e.prototype&&"function"==typeof e.prototype.appendBuffer&&"function"==typeof e.prototype.remove;return!!n&&!!r}function a(t){return Uint8Array.from(atob(t),function(t){return t.charCodeAt(0)})}function u(t,e){var n=new Uint8Array(t),r=n[92]<<24|n[93]<<16|n[94]<<8|n[95],o=n[96]<<24|n[97]<<16|n[98]<<8|n[99],i=r+o/1e6;this.utc=i,e(n[47],n)}function c(t,e,n,r){if(!n&&!r)return t;var o=(0,p.default)({url:t}),i="";if(o.query){i=o.query.split("&").map(function(t){return t.split("=")}).filter(function(t){return"from"!==t[0]&&"tracks"!==t[0]}).map(function(t){return t.join("=")}).join("&"),console.log(i)}var s=o.protocol+"//"+o.host+o.pathname+"?",a=!!n||!!r;return s+(a?"tracks="+n+r:"")+(a&&i?"&":"")+i}function h(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";return function(){var o=c(t,e,n,r);this.websocket=new WebSocket(o),this.websocket.binaryType="arraybuffer",this.onwso=this.onWebsocketOpen.bind(this),this.onwsdm=this.dispatchMessage.bind(this),this.websocket.addEventListener(d.default.WS_OPEN,this.onwso),this.websocket.addEventListener(d.default.WS_MESSAGE,this.onwsdm)}}Object.defineProperty(e,"__esModule",{value:!0}),e.replaceHttpByWS=e.checkVideoProgress=e.MAX_DELAY=void 0,e.getMediaSource=o,e.isAndroid=i,e.isSupportedMSE=s,e.base64ToArrayBuffer=a,e.doArrayBuffer=u,e.getWSURL=c,e.startWebSocket=h;var f=n(17),p=r(f),l=n(5),d=r(l),m=e.MAX_DELAY=/Edge\/1[45]/.test(navigator.userAgent)?10:2;e.checkVideoProgress=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:m;return function(n){var r=t.currentTime,o=t.buffered,i=t.buffered.length;if(i){var s=o.end(i-1);Math.abs(s-r)<=e||(console.log("nudge",r,"->",i?s:"-",n),t.currentTime=s-.2)}}},e.replaceHttpByWS=function(t){return t.replace(/^http/,"ws")}},function(t,e,n){"use strict";function r(t){var e=t.url;if(void 0!==e){var n=t._parsedUrl;return s(e,n)?n:(n=i(e),n._raw=e,t._parsedUrl=n)}}function o(t){var e=t.originalUrl;if("string"!=typeof e)return r(t);var n=t._parsedOriginalUrl;return s(e,n)?n:(n=i(e),n._raw=e,t._parsedOriginalUrl=n)}function i(t){if("string"!=typeof t||47!==t.charCodeAt(0))return u(t);for(var e=t,n=null,r=null,o=1;o<t.length;o++)switch(t.charCodeAt(o)){case 63:null===r&&(e=t.substring(0,o),n=t.substring(o+1),r=t.substring(o));break;case 9:case 10:case 12:case 13:case 32:case 35:case 160:case 65279:return u(t)}var i=void 0!==c?new c:{};return i.path=t,i.href=t,i.pathname=e,i.query=n,i.search=r,i}function s(t,e){return"object"==typeof e&&null!==e&&(void 0===c||e instanceof c)&&e._raw===t}var a=n(18),u=a.parse,c=a.Url;t.exports=r,t.exports.original=o},function(t,e,n){"use strict";function r(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}function o(t,e,n){if(t&&c.isObject(t)&&t instanceof r)return t;var o=new r;return o.parse(t,e,n),o}function i(t){return c.isString(t)&&(t=o(t)),t instanceof r?t.format():r.prototype.format.call(t)}function s(t,e){return o(t,!1,!0).resolve(e)}function a(t,e){return t?o(t,!1,!0).resolveObject(e):e}var u=n(19),c=n(22);e.parse=o,e.resolve=s,e.resolveObject=a,e.format=i,e.Url=r;var h=/^([a-z0-9.+-]+:)/i,f=/:[0-9]*$/,p=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,l=["<",">",'"',"`"," ","\r","\n","\t"],d=["{","}","|","\\","^","`"].concat(l),m=["'"].concat(d),v=["%","/","?",";","#"].concat(m),y=["/","?","#"],E=/^[+a-z0-9A-Z_-]{0,63}$/,g=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,b={javascript:!0,"javascript:":!0},_={javascript:!0,"javascript:":!0},S={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},O=n(23);r.prototype.parse=function(t,e,n){if(!c.isString(t))throw new TypeError("Parameter 'url' must be a string, not "+typeof t);var r=t.indexOf("?"),o=-1!==r&&r<t.indexOf("#")?"?":"#",i=t.split(o),s=/\\/g;i[0]=i[0].replace(s,"/"),t=i.join(o);var a=t;if(a=a.trim(),!n&&1===t.split("#").length){var f=p.exec(a);if(f)return this.path=a,this.href=a,this.pathname=f[1],f[2]?(this.search=f[2],this.query=e?O.parse(this.search.substr(1)):this.search.substr(1)):e&&(this.search="",this.query={}),this}var l=h.exec(a);if(l){l=l[0];var d=l.toLowerCase();this.protocol=d,a=a.substr(l.length)}if(n||l||a.match(/^\/\/[^@\/]+@[^@\/]+/)){var M="//"===a.substr(0,2);!M||l&&_[l]||(a=a.substr(2),this.slashes=!0)}if(!_[l]&&(M||l&&!S[l])){for(var w=-1,A=0;A<y.length;A++){var x=a.indexOf(y[A]);-1!==x&&(-1===w||x<w)&&(w=x)}var j,P;P=-1===w?a.lastIndexOf("@"):a.lastIndexOf("@",w),-1!==P&&(j=a.slice(0,P),a=a.slice(P+1),this.auth=decodeURIComponent(j)),w=-1;for(var A=0;A<v.length;A++){var x=a.indexOf(v[A]);-1!==x&&(-1===w||x<w)&&(w=x)}-1===w&&(w=a.length),this.host=a.slice(0,w),a=a.slice(w),this.parseHost(),this.hostname=this.hostname||"";var T="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!T)for(var I=this.hostname.split(/\./),A=0,k=I.length;A<k;A++){var C=I[A];if(C&&!C.match(E)){for(var U="",R=0,D=C.length;R<D;R++)C.charCodeAt(R)>127?U+="x":U+=C[R];if(!U.match(E)){var L=I.slice(0,A),N=I.slice(A+1),q=C.match(g);q&&(L.push(q[1]),N.unshift(q[2])),N.length&&(a="/"+N.join(".")+a),this.hostname=L.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),T||(this.hostname=u.toASCII(this.hostname));var B=this.port?":"+this.port:"",W=this.hostname||"";this.host=W+B,this.href+=this.host,T&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==a[0]&&(a="/"+a))}if(!b[d])for(var A=0,k=m.length;A<k;A++){var F=m[A];if(-1!==a.indexOf(F)){var G=encodeURIComponent(F);G===F&&(G=escape(F)),a=a.split(F).join(G)}}var H=a.indexOf("#");-1!==H&&(this.hash=a.substr(H),a=a.slice(0,H));var z=a.indexOf("?");if(-1!==z?(this.search=a.substr(z),this.query=a.substr(z+1),e&&(this.query=O.parse(this.query)),a=a.slice(0,z)):e&&(this.search="",this.query={}),a&&(this.pathname=a),S[d]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var B=this.pathname||"",K=this.search||"";this.path=B+K}return this.href=this.format(),this},r.prototype.format=function(){var t=this.auth||"";t&&(t=encodeURIComponent(t),t=t.replace(/%3A/i,":"),t+="@");var e=this.protocol||"",n=this.pathname||"",r=this.hash||"",o=!1,i="";this.host?o=t+this.host:this.hostname&&(o=t+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(o+=":"+this.port)),this.query&&c.isObject(this.query)&&Object.keys(this.query).length&&(i=O.stringify(this.query));var s=this.search||i&&"?"+i||"";return e&&":"!==e.substr(-1)&&(e+=":"),this.slashes||(!e||S[e])&&!1!==o?(o="//"+(o||""),n&&"/"!==n.charAt(0)&&(n="/"+n)):o||(o=""),r&&"#"!==r.charAt(0)&&(r="#"+r),s&&"?"!==s.charAt(0)&&(s="?"+s),n=n.replace(/[?#]/g,function(t){return encodeURIComponent(t)}),s=s.replace("#","%23"),e+o+n+s+r},r.prototype.resolve=function(t){return this.resolveObject(o(t,!1,!0)).format()},r.prototype.resolveObject=function(t){if(c.isString(t)){var e=new r;e.parse(t,!1,!0),t=e}for(var n=new r,o=Object.keys(this),i=0;i<o.length;i++){var s=o[i];n[s]=this[s]}if(n.hash=t.hash,""===t.href)return n.href=n.format(),n;if(t.slashes&&!t.protocol){for(var a=Object.keys(t),u=0;u<a.length;u++){var h=a[u];"protocol"!==h&&(n[h]=t[h])}return S[n.protocol]&&n.hostname&&!n.pathname&&(n.path=n.pathname="/"),n.href=n.format(),n}if(t.protocol&&t.protocol!==n.protocol){if(!S[t.protocol]){for(var f=Object.keys(t),p=0;p<f.length;p++){var l=f[p];n[l]=t[l]}return n.href=n.format(),n}if(n.protocol=t.protocol,t.host||_[t.protocol])n.pathname=t.pathname;else{for(var d=(t.pathname||"").split("/");d.length&&!(t.host=d.shift()););t.host||(t.host=""),t.hostname||(t.hostname=""),""!==d[0]&&d.unshift(""),d.length<2&&d.unshift(""),n.pathname=d.join("/")}if(n.search=t.search,n.query=t.query,n.host=t.host||"",n.auth=t.auth,n.hostname=t.hostname||t.host,n.port=t.port,n.pathname||n.search){var m=n.pathname||"",v=n.search||"";n.path=m+v}return n.slashes=n.slashes||t.slashes,n.href=n.format(),n}var y=n.pathname&&"/"===n.pathname.charAt(0),E=t.host||t.pathname&&"/"===t.pathname.charAt(0),g=E||y||n.host&&t.pathname,b=g,O=n.pathname&&n.pathname.split("/")||[],d=t.pathname&&t.pathname.split("/")||[],M=n.protocol&&!S[n.protocol];if(M&&(n.hostname="",n.port=null,n.host&&(""===O[0]?O[0]=n.host:O.unshift(n.host)),n.host="",t.protocol&&(t.hostname=null,t.port=null,t.host&&(""===d[0]?d[0]=t.host:d.unshift(t.host)),t.host=null),g=g&&(""===d[0]||""===O[0])),E)n.host=t.host||""===t.host?t.host:n.host,n.hostname=t.hostname||""===t.hostname?t.hostname:n.hostname,n.search=t.search,n.query=t.query,O=d;else if(d.length)O||(O=[]),O.pop(),O=O.concat(d),n.search=t.search,n.query=t.query;else if(!c.isNullOrUndefined(t.search)){if(M){n.hostname=n.host=O.shift();var w=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@");w&&(n.auth=w.shift(),n.host=n.hostname=w.shift())}return n.search=t.search,n.query=t.query,c.isNull(n.pathname)&&c.isNull(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.href=n.format(),n}if(!O.length)return n.pathname=null,n.search?n.path="/"+n.search:n.path=null,n.href=n.format(),n;for(var A=O.slice(-1)[0],x=(n.host||t.host||O.length>1)&&("."===A||".."===A)||""===A,j=0,P=O.length;P>=0;P--)A=O[P],"."===A?O.splice(P,1):".."===A?(O.splice(P,1),j++):j&&(O.splice(P,1),j--);if(!g&&!b)for(;j--;j)O.unshift("..");!g||""===O[0]||O[0]&&"/"===O[0].charAt(0)||O.unshift(""),x&&"/"!==O.join("/").substr(-1)&&O.push("");var T=""===O[0]||O[0]&&"/"===O[0].charAt(0);if(M){n.hostname=n.host=T?"":O.length?O.shift():"";var w=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@");w&&(n.auth=w.shift(),n.host=n.hostname=w.shift())}return g=g||n.host&&O.length,g&&!T&&O.unshift(""),O.length?n.pathname=O.join("/"):(n.pathname=null,n.path=null),c.isNull(n.pathname)&&c.isNull(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.auth=t.auth||n.auth,n.slashes=n.slashes||t.slashes,n.href=n.format(),n},r.prototype.parseHost=function(){var t=this.host,e=f.exec(t);e&&(e=e[0],":"!==e&&(this.port=e.substr(1)),t=t.substr(0,t.length-e.length)),t&&(this.hostname=t)}},function(t,e,n){(function(t,r){var o;!function(i){function s(t){throw new RangeError(k[t])}function a(t,e){for(var n=t.length,r=[];n--;)r[n]=e(t[n]);return r}function u(t,e){var n=t.split("@"),r="";return n.length>1&&(r=n[0]+"@",t=n[1]),t=t.replace(I,"."),r+a(t.split("."),e).join(".")}function c(t){for(var e,n,r=[],o=0,i=t.length;o<i;)e=t.charCodeAt(o++),e>=55296&&e<=56319&&o<i?(n=t.charCodeAt(o++),56320==(64512&n)?r.push(((1023&e)<<10)+(1023&n)+65536):(r.push(e),o--)):r.push(e);return r}function h(t){return a(t,function(t){var e="";return t>65535&&(t-=65536,e+=R(t>>>10&1023|55296),t=56320|1023&t),e+=R(t)}).join("")}function f(t){return t-48<10?t-22:t-65<26?t-65:t-97<26?t-97:_}function p(t,e){return t+22+75*(t<26)-((0!=e)<<5)}function l(t,e,n){var r=0;for(t=n?U(t/w):t>>1,t+=U(t/e);t>C*O>>1;r+=_)t=U(t/C);return U(r+(C+1)*t/(t+M))}function d(t){var e,n,r,o,i,a,u,c,p,d,m=[],v=t.length,y=0,E=x,g=A;for(n=t.lastIndexOf(j),n<0&&(n=0),r=0;r<n;++r)t.charCodeAt(r)>=128&&s("not-basic"),m.push(t.charCodeAt(r));for(o=n>0?n+1:0;o<v;){for(i=y,a=1,u=_;o>=v&&s("invalid-input"),c=f(t.charCodeAt(o++)),(c>=_||c>U((b-y)/a))&&s("overflow"),y+=c*a,p=u<=g?S:u>=g+O?O:u-g,!(c<p);u+=_)d=_-p,a>U(b/d)&&s("overflow"),a*=d;e=m.length+1,g=l(y-i,e,0==i),U(y/e)>b-E&&s("overflow"),E+=U(y/e),y%=e,m.splice(y++,0,E)}return h(m)}function m(t){var e,n,r,o,i,a,u,h,f,d,m,v,y,E,g,M=[];for(t=c(t),v=t.length,e=x,n=0,i=A,a=0;a<v;++a)(m=t[a])<128&&M.push(R(m));for(r=o=M.length,o&&M.push(j);r<v;){for(u=b,a=0;a<v;++a)(m=t[a])>=e&&m<u&&(u=m);for(y=r+1,u-e>U((b-n)/y)&&s("overflow"),n+=(u-e)*y,e=u,a=0;a<v;++a)if(m=t[a],m<e&&++n>b&&s("overflow"),m==e){for(h=n,f=_;d=f<=i?S:f>=i+O?O:f-i,!(h<d);f+=_)g=h-d,E=_-d,M.push(R(p(d+g%E,0))),h=U(g/E);M.push(R(p(h,0))),i=l(n,y,r==o),n=0,++r}++n,++e}return M.join("")}function v(t){return u(t,function(t){return P.test(t)?d(t.slice(4).toLowerCase()):t})}function y(t){return u(t,function(t){return T.test(t)?"xn--"+m(t):t})}var E=("object"==typeof e&&e&&e.nodeType,"object"==typeof t&&t&&t.nodeType,"object"==typeof r&&r);var g,b=2147483647,_=36,S=1,O=26,M=38,w=700,A=72,x=128,j="-",P=/^xn--/,T=/[^\x20-\x7E]/,I=/[\x2E\u3002\uFF0E\uFF61]/g,k={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},C=_-S,U=Math.floor,R=String.fromCharCode;g={version:"1.4.1",ucs2:{decode:c,encode:h},decode:d,encode:m,toASCII:y,toUnicode:v},void 0!==(o=function(){return g}.call(e,n,e,t))&&(t.exports=o)}()}).call(e,n(20)(t),n(21))},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,e){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e,n){"use strict";t.exports={isString:function(t){return"string"==typeof t},isObject:function(t){return"object"==typeof t&&null!==t},isNull:function(t){return null===t},isNullOrUndefined:function(t){return null==t}}},function(t,e,n){"use strict";e.decode=e.parse=n(24),e.encode=e.stringify=n(25)},function(t,e,n){"use strict";function r(t,e){return Object.prototype.hasOwnProperty.call(t,e)}t.exports=function(t,e,n,i){e=e||"&",n=n||"=";var s={};if("string"!=typeof t||0===t.length)return s;var a=/\+/g;t=t.split(e);var u=1e3;i&&"number"==typeof i.maxKeys&&(u=i.maxKeys);var c=t.length;u>0&&c>u&&(c=u);for(var h=0;h<c;++h){var f,p,l,d,m=t[h].replace(a,"%20"),v=m.indexOf(n);v>=0?(f=m.substr(0,v),p=m.substr(v+1)):(f=m,p=""),l=decodeURIComponent(f),d=decodeURIComponent(p),r(s,l)?o(s[l])?s[l].push(d):s[l]=[s[l],d]:s[l]=d}return s};var o=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)}},function(t,e,n){"use strict";function r(t,e){if(t.map)return t.map(e);for(var n=[],r=0;r<t.length;r++)n.push(e(t[r],r));return n}var o=function(t){switch(typeof t){case"string":return t;case"boolean":return t?"true":"false";case"number":return isFinite(t)?t:"";default:return""}};t.exports=function(t,e,n,a){return e=e||"&",n=n||"=",null===t&&(t=void 0),"object"==typeof t?r(s(t),function(s){var a=encodeURIComponent(o(s))+n;return i(t[s])?r(t[s],function(t){return a+encodeURIComponent(o(t))}).join(e):a+encodeURIComponent(o(t[s]))}).join(e):a?encodeURIComponent(o(a))+n+encodeURIComponent(o(t)):""};var i=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},s=Object.keys||function(t){var e=[];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.push(n);return e}},function(t,e,n){n(27),t.exports=n(2).Array.find},function(t,e,n){"use strict";var r=n(28),o=n(38)(5),i=!0;"find"in[]&&Array(1).find(function(){i=!1}),r(r.P+r.F*i,"Array",{find:function(t){return o(this,t,arguments.length>1?arguments[1]:void 0)}}),n(48)("find")},function(t,e,n){var r=n(0),o=n(2),i=n(3),s=n(35),a=n(8),u=function(t,e,n){var c,h,f,p,l=t&u.F,d=t&u.G,m=t&u.S,v=t&u.P,y=t&u.B,E=d?r:m?r[e]||(r[e]={}):(r[e]||{}).prototype,g=d?o:o[e]||(o[e]={}),b=g.prototype||(g.prototype={});d&&(n=e);for(c in n)h=!l&&E&&void 0!==E[c],f=(h?E:n)[c],p=y&&h?a(f,r):v&&"function"==typeof f?a(Function.call,f):f,E&&s(E,c,f,t&u.U),g[c]!=f&&i(g,c,p),v&&b[c]!=f&&(b[c]=f)};r.core=o,u.F=1,u.G=2,u.S=4,u.P=8,u.B=16,u.W=32,u.U=64,u.R=128,t.exports=u},function(t,e,n){var r=n(30),o=n(31),i=n(33),s=Object.defineProperty;e.f=n(4)?Object.defineProperty:function(t,e,n){if(r(t),e=i(e,!0),r(n),o)try{return s(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(t[e]=n.value),t}},function(t,e,n){var r=n(1);t.exports=function(t){if(!r(t))throw TypeError(t+" is not an object!");return t}},function(t,e,n){t.exports=!n(4)&&!n(6)(function(){return 7!=Object.defineProperty(n(32)("div"),"a",{get:function(){return 7}}).a})},function(t,e,n){var r=n(1),o=n(0).document,i=r(o)&&r(o.createElement);t.exports=function(t){return i?o.createElement(t):{}}},function(t,e,n){var r=n(1);t.exports=function(t,e){if(!r(t))return t;var n,o;if(e&&"function"==typeof(n=t.toString)&&!r(o=n.call(t)))return o;if("function"==typeof(n=t.valueOf)&&!r(o=n.call(t)))return o;if(!e&&"function"==typeof(n=t.toString)&&!r(o=n.call(t)))return o;throw TypeError("Can't convert object to primitive value")}},function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},function(t,e,n){var r=n(0),o=n(3),i=n(36),s=n(7)("src"),a=Function.toString,u=(""+a).split("toString");n(2).inspectSource=function(t){return a.call(t)},(t.exports=function(t,e,n,a){var c="function"==typeof n;c&&(i(n,"name")||o(n,"name",e)),t[e]!==n&&(c&&(i(n,s)||o(n,s,t[e]?""+t[e]:u.join(String(e)))),t===r?t[e]=n:a?t[e]?t[e]=n:o(t,e,n):(delete t[e],o(t,e,n)))})(Function.prototype,"toString",function(){return"function"==typeof this&&this[s]||a.call(this)})},function(t,e){var n={}.hasOwnProperty;t.exports=function(t,e){return n.call(t,e)}},function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},function(t,e,n){var r=n(8),o=n(39),i=n(40),s=n(42),a=n(44);t.exports=function(t,e){var n=1==t,u=2==t,c=3==t,h=4==t,f=6==t,p=5==t||f,l=e||a;return function(e,a,d){for(var m,v,y=i(e),E=o(y),g=r(a,d,3),b=s(E.length),_=0,S=n?l(e,b):u?l(e,0):void 0;b>_;_++)if((p||_ in E)&&(m=E[_],v=g(m,_,y),t))if(n)S[_]=v;else if(v)switch(t){case 3:return!0;case 5:return m;case 6:return _;case 2:S.push(m)}else if(h)return!1;return f?-1:c||h?h:S}}},function(t,e,n){var r=n(9);t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==r(t)?t.split(""):Object(t)}},function(t,e,n){var r=n(41);t.exports=function(t){return Object(r(t))}},function(t,e){t.exports=function(t){if(void 0==t)throw TypeError("Can't call method on  "+t);return t}},function(t,e,n){var r=n(43),o=Math.min;t.exports=function(t){return t>0?o(r(t),9007199254740991):0}},function(t,e){var n=Math.ceil,r=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?r:n)(t)}},function(t,e,n){var r=n(45);t.exports=function(t,e){return new(r(t))(e)}},function(t,e,n){var r=n(1),o=n(46),i=n(10)("species");t.exports=function(t){var e;return o(t)&&(e=t.constructor,"function"!=typeof e||e!==Array&&!o(e.prototype)||(e=void 0),r(e)&&null===(e=e[i])&&(e=void 0)),void 0===e?Array:e}},function(t,e,n){var r=n(9);t.exports=Array.isArray||function(t){return"Array"==r(t)}},function(t,e,n){var r=n(0),o=r["__core-js_shared__"]||(r["__core-js_shared__"]={});t.exports=function(t){return o[t]||(o[t]={})}},function(t,e,n){var r=n(10)("unscopables"),o=Array.prototype;void 0==o[r]&&n(3)(o,r,{}),t.exports=function(t){o[r][t]=!0}}])});